#!/bin/sh

###############################################################################
# This script is intended to be called by inotifyd whenever a Tvheadend marker
# file is updated.
###############################################################################

event="$1"
directory="$2"
file="$3"
timestamp=$(date +"%Y-%m-%dT%H:%M:%SZ")

echo "$timestamp Notification: $file"
case "$file" in
  recording-pre-process|recording-post-process)
    $(dirname "$0")/tvheadend-status publish status
    ;;
  recording-post-remove)
    echo "No action intended."
    ;;
  *)
    echo "Notification unsupported."
    ;;
esac
